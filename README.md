## Запуск проекта: docker-compose up --build

# тестовые запросы на проверку (через терминал)
создать задачу
```
curl -X POST http://localhost:8080/task/create \  
-H "Content-Type: application/json" \
-d '{"task": "Example Task"}'
```
посмотреть задачу
```
curl -X GET "http://localhost:8080/task/check-result?task_id=<таск айди из пост запроса>"
```






## Основные возможности

### 1. Создание задач
- Каждая задача получает уникальный идентификатор.
- Задачи выполняются асинхронно в отдельных **горутинах**.
- Поддержка **таймаута** выполнения задачи (по умолчанию 4 минуты).

### 2. Проверка статуса задач
- Пользователь может запросить текущий статус задачи по её уникальному идентификатору.
- Статусы задач:
  - `in progress` — выполняется.
  - `completed` — завершена.
  - `failed` — завершена с ошибкой.

### 3. Graceful Shutdown
- При остановке сервера все активные задачи корректно завершаются или отменяются.
- Состояние незавершенных задач обновляется в базе данных (например, с `in progress` на `failed`).
- Соединение с базой данных закрывается после завершения всех операций.

### 4. Логирование
- Подробное **логирование** всех ключевых операций:
  - создание задачи,
  - изменение статуса,
  - завершение работы сервера.
- Логи содержат уникальные идентификаторы задач и помогают отслеживать выполнение и диагностировать ошибки.

### 5. Работа с PostgreSQL
- Все задачи сохраняются в базе данных.
- Поддержка обновления статусов задач при завершении работы сервера.

---

## API Ручки

### 1. **Создание задачи** (`POST /task/create`)
- **Метод**: `POST`
- **Описание**: Создает новую задачу.
- **Тело запроса** (JSON):
  ```json
  {
    "task": "task"
  }
  ```
Где:
- `task` — строка, представляющая задачу, которую нужно выполнить.

- **Ответ**:
    - **Успех**: Возвращает уникальный идентификатор задачи и сообщение о создании.
      ```json
      {
        "task_id": "12345",
        "status": "success"
      }
      ```
    - **Ошибка**: Возвращает ошибку с описанием проблемы (например, некорректный формат запроса).
      ```json
      {
        "error": "Invalid task data"
      }
      ```

---

### 2. **Проверка статуса задачи** (`GET /task/check-result`)
- **Метод**: `GET`
- **Описание**: Получение статуса задачи по её уникальному идентификатору.
- **Параметры запроса**:
    - `task_id` — уникальный идентификатор задачи для проверки статуса.

  Пример URL:  
  `/task/check-result?task_id=<task_id>`

  - **Ответ**:
      - **Успех**: Возвращает статус задачи.
        ```json
        {
            "Task" : "task",
            "CreatedAt" : "2025-04-20T16:25:35.363258Z",
            "Task_identification" : "b0d4d5a2-511a-4691-8836-86637567b7d4",
            "Result" : "some result...",
            "Status" : "failed"
        }
        ```
      - **Ошибка**: Возвращает ошибку, если задача с таким идентификатором не существует.
        ```json
        {
          "error": "Task not found"
        }
        ```
## Запуск проекта (с установкой всех зависимостей)
Установить и накатить миграции через Makefile, поднять docker-compose и запустить через go run cmd/main.go